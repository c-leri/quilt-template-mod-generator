<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="res/favicon.ico">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script type="module">
        import { init_versions, reload_mc_versions, reload_q_dpendencies_list } from './js/init_versions.js';
        import { gen_and_download_zip } from './js/generate_prj.js';

        window.onload = () => {
            init_versions();

            document.getElementById("mcVersion").addEventListener("change", () =>
                reload_q_dpendencies_list(
                    Array.from(event.target.options)
                        .map((version_element) => version_element.textContent)
                        .filter((version) => version <= event.target.value)
                )
            );

            document.getElementById("mcStable").addEventListener("change", () => reload_mc_versions(event.target.checked));

            document.getElementById("useQSL").addEventListener("change", (event) => {
                if (event.target.checked) {
                    document.getElementById('lbQslVersion').hidden = false;
                    document.getElementById('qslVersion').hidden = false;
                    document.getElementById('lbQfapiVersion').hidden = false;
                    document.getElementById('qfapiVersion').hidden = false;
                } else {
                    document.getElementById('lbQslVersion').hidden = true;
                    document.getElementById('qslVersion').hidden = true;
                    document.getElementById('lbQfapiVersion').hidden = true;
                    document.getElementById('qfapiVersion').hidden = true;
                }
            });

            document.getElementById("gen").addEventListener("click", gen_and_download_zip);
        }
    </script>
    <title>Quilt Template Mod Generator</title>
</head>

<body>
    <nav id="pageHeader">
        <a href="." style="text-decoration: none">
            <img src="res/logo.svg" class="inNav" alt="" width="32" height="32">
        </a>
        <a href="https://github.com/Jaffe2718/quilt-template-mod-generator" style="text-decoration: none;">
            <label class="inNav">Source</label>
        </a>
        <a href="https://github.com/Jaffe2718/quilt-template-mod-generator/issues" style="text-decoration: none;">
            <label class="inNav">Issues</label>
        </a>
    </nav>
    <h1>Quilt Template Mod Generator</h1>
    <div id="main">
        <h2>Project Configuration</h2>
        <div>
            <label for="artifactID">Artifact ID</label>
            <input type="text" id="artifactID" name="artifactID" placeholder="example_mod" required>
        </div>
        <div>
            <label for="groupID">Group ID</label>
            <input type="text" id="groupID" name="groupID" placeholder="me.example" required>
        </div>
        <div>
            <label for="gradleVersion">Gradle Version</label>
            <select id="gradleVersion">
            </select>
        </div>
        <div>
            <label for="useQuiltFlower">Use QuiltFlower Decompiler?</label>
            <input type="checkbox" id="useQuiltFlower" name="useQuiltFlower">
        </div>


        <h2>Mod Configuration</h2>
        <div>
            <label for="modName">Mod name</label>
            <input type="text" id="modName" name="modName" placeholder="modName" required>
        </div>
        <div>
            <label for="modVersion">Mod version</label>
            <input type="text" id="modVersion" name="modVersion" placeholder="modVersion" required>
        </div>
        <div>
            <label for="environment">Environment</label>
            <select id="environment">
                <option value="both">Both</option>
                <option value="client">Client</option>
                <option value="server">Server</option>
            </select>
        </div>

        <h2>Dependencies Configuration</h2>
        <div>
            <label for="mcVersion">Minecraft version</label>
            <select id="mcVersion">
            </select>
            <label for="mcStable">Stable?</label>
            <input type="checkbox" id="mcStable" name="stable" checked>
        </div>
        <div>
            <label for="loaderVersion">Quilt loader version</label>
            <select id="loaderVersion"></select>
        </div>
        <div>
            <label for="quiltMapping">Quilt Mappings</label>
            <select id="quiltMapping"></select>
        </div>
        <div>
            <label for="useQSL">Use QSL & QFAPI?</label>
            <input id="useQSL" type="checkbox" checked />
        </div>
        <div>
            <div>
                <label for="qslVersion" id="lbQslVersion">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quilt Standard Libraries
                    (QSL)
                </label>
                <select id="qslVersion"></select>
            </div>
            <div>
                <label for="qfapiVersion" id="lbQfapiVersion">
                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Quilted Fabric API (QFAPI)
                </label>
                <select id="qfapiVersion"></select>
            </div>
        </div>
        <div>
            <label for="useMixins">Use Mixins?</label>
            <input id="useMixins" type="checkbox" checked>
        </div>

        <h2>Optional Settings</h2>
        <details>
            <summary></summary>
            <div>
                <label for="description">Description</label><br>
                <textarea id="description" name="description" placeholder="description" rows="5" cols="60"></textarea>
            </div>
            <div>
                <label for="author">Author</label>
                <input type="text" id="author" name="author" placeholder="author">
            </div>
            <div>
                <label for="homepage">Homepage</label>
                <input type="text" id="homepage" name="homepage" placeholder="homepage">
            </div>
            <div>
                <label for="sourceRepo">Source Repository</label>
                <input type="text" id="sourceRepo" name="source" placeholder="source">
            </div>
            <div>
                <label for="issues">Issues</label>
                <input type="text" id="issues" name="issues" placeholder="issues">
            </div>
        </details>
    </div>
    <div style="alignment-baseline: center; text-align: center">
        <button id="gen">
            Generate
        </button>
    </div>
    <div id="pageFooter">
        <span>
            This page is powered by
            <a href="https://pages.github.com">GitHub Pages</a>.
        </span>
    </div>
</body>

</html>